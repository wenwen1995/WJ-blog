(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{379:function(s,n,e){"use strict";e.r(n);var t=e(44),a=Object(t.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h4",{attrs:{id:"静态环形进度条svg实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#静态环形进度条svg实现"}},[s._v("#")]),s._v(" 静态环形进度条svg实现")]),s._v(" "),e("p",[s._v("环形进度条可以用svg 实现，Element-ui中的环形进度条就是用svg实现的")]),s._v(" "),e("p",[s._v("svg好文链接：\n  1、推荐！介绍svg实现环形的用法，以及 stroke-dasharray, stroke-dashoffset表示的意义： "),e("a",{attrs:{href:"https://www.cnblogs.com/daisygogogo/p/11044353.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/daisygogogo/p/11044353.html"),e("OutboundLink")],1),s._v("\n  2、"),e("a",{attrs:{href:"https://jakearchibald.com/2013/animated-line-drawing-svg/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://jakearchibald.com/2013/animated-line-drawing-svg/"),e("OutboundLink")],1),s._v("\n  3、国外实现环形进度条好文： "),e("a",{attrs:{href:"https://css-tricks.com/building-progress-ring-quickly/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://css-tricks.com/building-progress-ring-quickly/"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("所以，看了上述几篇文章，才能看下面的svg代码，So，svg的基本知识就不多讲了。")]),s._v(" "),e("p",[s._v("html: （代码用vue书写）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<div id="app">\n  <svg\n      class="progress-ring"\n      width="120"\n      height="120">\n    <circle\n        class="progress-ring__circle"\n        stroke="#0C7CEB"\n        stroke-width="10"\n        fill="transparent"\n        r="50"\n        cx="60"\n        cy="60"/>\n  </svg>\n\n\n  <p>进度为：{{ initialVal }}</p>\n  <button @click="minusOne"> 点我减1</button>\n  <button @click="plusOne"> 点我加1</button>\n  </div>\n</div>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("p",[s._v("css代码：（关于这块也是有点说的， 继续往下看吧~）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<style>\n  .progress-ring__circle {\n      transform: rotate(-90deg);\n      transform-origin: 50% 50%;\n  }\n</style>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("Js代码：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"><\/script>\n<script>\n  new Vue({\n      el: document.getElementById('app'),\n      data() {\n        return {\n            initialVal: 70,\n            perimeter: 0,\n        }\n      },\n      mounted() {\n          const el = document.querySelector('.progress-ring__circle');\n          const radius = el.r.baseVal.value;\n          this.perimeter = 2 * Math.PI * radius;\n          // 虚线长为周长，间距为周长，如此循环\n          el.style.strokeDasharray = `${this.perimeter} ${this.perimeter}`;\n          this.setOffset();\n      },\n      methods: {\n          setOffset() {\n              const offset = this.perimeter - (this.initialVal/100) * this.perimeter;\n              const el = document.querySelector('.progress-ring__circle');\n              el.style.strokeDashoffset = offset;\n          },\n          minusOne() {\n              this.initialVal -= 1;\n              this.setOffset();\n          },\n          plusOne() {\n            this.initialVal += 1;\n            this.setOffset();\n          },\n      }\n  })\n<\/script>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br")])]),e("p",[s._v("来理解一下svg的思路：")]),s._v(" "),e("p",[s._v("Svg 实现环形图的原理是："),e("strong",[s._v("设置stroke-dasharray虚线长度等于当前圆的周长，间隔大于或者等于圆的周长（这样相当于 虚线长是圆的一周，隔个圆的一周长度，再进行环形（效果就这么出来） ）")])]),s._v(" "),e("p",[s._v("而圆的周长怎么算呢， 圆的周长 = 2 * Pi * r(圆的半径)")]),s._v(" "),e("p",[s._v("所以初始mounted函数中，代码中，设置了元素的strokeDasharray 为周长，间隔等于周长，")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mounted() {\n          const el = document.querySelector('.progress-ring__circle');\n          const radius = el.r.baseVal.value;\n          this.perimeter = 2 * Math.PI * radius;\n          // 虚线长为周长，间距为周长，如此循环\n          el.style.strokeDasharray = `${this.perimeter} ${this.perimeter}`;\n          this.setOffset();\n},\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("而this.setOffset()的作用是对线条设置偏移，实现动态变化，上述文章也说了：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/1273659-54c3e31177db8262.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})]),s._v(" "),e("p",[s._v("而我们的svg circle，当设置了stroke-dashoffset时，默认其出发点是为中心的垂直和水平向右倾斜。所以有必要负的角度旋转圆，来获得想要的效果。")]),s._v(" "),e("p",[s._v("未对环形设置样式之前，是这样的：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/1273659-bc7ed718d09dd358.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})]),s._v(" "),e("p",[s._v("加上style样式后，就变成我们想要的，从12点方向开始顺时针旋转，如下图")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(".progress-ring__circle {\n    transform: rotate(-90deg);\n    transform-origin: 50% 50%;\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/1273659-c568b9befe80c38b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})]),s._v(" "),e("p",[s._v("这里，transform 和transform-origin 的用法，有一篇不错的文章讲的很棒："),e("a",{attrs:{href:"http://www.360doc.com/content/20/0710/23/25947829_923464975.shtml",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://www.360doc.com/content/20/0710/23/25947829_923464975.shtml"),e("OutboundLink")],1),s._v("， 当然你也可以参考我的这篇文章进行阅读学习：https://www.jianshu.com/p/074cb7116537")]),s._v(" "),e("p",[s._v("接上面offset设置，初始执行了函数setOffset,  总周长 减去 百分比周长，得到的是个正数，上面截图怎么说来着，")]),s._v(" "),e("ul",[e("li",[s._v("offset 为正数，向左 偏移 offset 个单位")]),s._v(" "),e("li",[s._v("offset 为负数，向右 偏移 offset 个单位")])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/1273659-4c53eba7682eaa9b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const offset = this.perimeter - (this.initialVal/100) * this.perimeter;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("默认没设置strokeDashoffset、也没设置上述的样式（旋转等），circle是个满圆，现在设置了个正数，即可以这么理解，即满足我们的要求了")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/1273659-ccc7a12cd548ad08.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})]),s._v(" "),e("p",[s._v("而当点击点我减一的按钮时，百分比持续减少，根据 "),e("strong",[s._v("被减数 -  减数 = 差")]),s._v("，百分比就是里面的减数，"),e("strong",[s._v("被减数不变，减数持续减少，得到的差即offset值就变得越来越大，即每次向左往回拉的就越厉害")]),s._v("，视觉看起来就是"),e("strong",[s._v("逆时针走")])]),s._v(" "),e("p",[s._v("同理，当点击点我加一的按钮时，百分比持续增大，根据 "),e("strong",[s._v("被减数 -  减数 = 差")]),s._v("，百分比就是里面的减数，"),e("strong",[s._v("被减数不变，减数持续增大，得到的差即offset值就变得越来越小，即每次向左往回拉的就越小")]),s._v("，视觉看起来就是"),e("strong",[s._v("顺时针走")])])])}),[],!1,null,null,null);n.default=a.exports}}]);