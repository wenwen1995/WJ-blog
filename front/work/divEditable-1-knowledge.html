<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WJ-blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/WJ-blog/logo.jpg">
    <meta name="description" content="我的个人网站">
    <meta name="referrer" content="never">
    
    <link rel="preload" href="/WJ-blog/assets/css/0.styles.ac442f4a.css" as="style"><link rel="preload" href="/WJ-blog/assets/js/app.9890bca3.js" as="script"><link rel="preload" href="/WJ-blog/assets/js/2.38039cab.js" as="script"><link rel="preload" href="/WJ-blog/assets/js/4.9a29327f.js" as="script"><link rel="preload" href="/WJ-blog/assets/js/19.c27f844c.js" as="script"><link rel="prefetch" href="/WJ-blog/assets/js/10.4aa4f924.js"><link rel="prefetch" href="/WJ-blog/assets/js/11.2a0d3812.js"><link rel="prefetch" href="/WJ-blog/assets/js/12.a4f6b512.js"><link rel="prefetch" href="/WJ-blog/assets/js/13.e7abe64a.js"><link rel="prefetch" href="/WJ-blog/assets/js/14.be8cc402.js"><link rel="prefetch" href="/WJ-blog/assets/js/15.80e115f3.js"><link rel="prefetch" href="/WJ-blog/assets/js/16.2cb738bc.js"><link rel="prefetch" href="/WJ-blog/assets/js/17.279ae8d7.js"><link rel="prefetch" href="/WJ-blog/assets/js/18.982ea5c8.js"><link rel="prefetch" href="/WJ-blog/assets/js/20.ba677fba.js"><link rel="prefetch" href="/WJ-blog/assets/js/21.2a0d7643.js"><link rel="prefetch" href="/WJ-blog/assets/js/22.a5344bca.js"><link rel="prefetch" href="/WJ-blog/assets/js/23.4b8274ea.js"><link rel="prefetch" href="/WJ-blog/assets/js/24.42ac8861.js"><link rel="prefetch" href="/WJ-blog/assets/js/25.2690aeeb.js"><link rel="prefetch" href="/WJ-blog/assets/js/26.5a438088.js"><link rel="prefetch" href="/WJ-blog/assets/js/27.600f7bbe.js"><link rel="prefetch" href="/WJ-blog/assets/js/28.e592b7b8.js"><link rel="prefetch" href="/WJ-blog/assets/js/29.211c62f0.js"><link rel="prefetch" href="/WJ-blog/assets/js/3.9da2f380.js"><link rel="prefetch" href="/WJ-blog/assets/js/30.547715e6.js"><link rel="prefetch" href="/WJ-blog/assets/js/31.a4ac843a.js"><link rel="prefetch" href="/WJ-blog/assets/js/32.7c28f772.js"><link rel="prefetch" href="/WJ-blog/assets/js/33.6f782f45.js"><link rel="prefetch" href="/WJ-blog/assets/js/34.72d267f0.js"><link rel="prefetch" href="/WJ-blog/assets/js/35.17fd4018.js"><link rel="prefetch" href="/WJ-blog/assets/js/36.6c0a59d6.js"><link rel="prefetch" href="/WJ-blog/assets/js/5.f09a7e4f.js"><link rel="prefetch" href="/WJ-blog/assets/js/6.6cce9e14.js"><link rel="prefetch" href="/WJ-blog/assets/js/7.dce9316e.js"><link rel="prefetch" href="/WJ-blog/assets/js/8.c25125db.js"><link rel="prefetch" href="/WJ-blog/assets/js/9.c239490a.js">
    <link rel="stylesheet" href="/WJ-blog/assets/css/0.styles.ac442f4a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/WJ-blog/" class="home-link router-link-active"><!----> <span class="site-name">WJ-blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/WJ-blog/front/introduction.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/WJ-blog/algorithm/study-leetcode.html" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/WJ-blog/life/introduction.html" class="nav-link">
  生活
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/WJ-blog/front/introduction.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/WJ-blog/algorithm/study-leetcode.html" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/WJ-blog/life/introduction.html" class="nav-link">
  生活
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端学习</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/WJ-blog/front/introduction.html" class="sidebar-link">介绍</a></li><li><a href="/WJ-blog/front/study/single-spa-understand.html" class="sidebar-link">关于single-spa的理解和小实战</a></li><li><a href="/WJ-blog/front/study/typescript-about-interface-understand.html" class="sidebar-link">TYPESCRIPT 关于interface理解</a></li><li><a href="/WJ-blog/front/study/css3 transform, transform-origin usage.html" class="sidebar-link">css3 transform, transform-origin 用法</a></li><li><a href="/WJ-blog/front/study/virtualList-fixedItem.html" class="sidebar-link">虚拟列表(item固定高度实现+理解)</a></li><li><a href="/WJ-blog/front/study/virtualList-dynamatic.html" class="sidebar-link">虚拟列表(item高度不固定实现+理解)</a></li><li><a href="/WJ-blog/front/study/virtualList-intersectionObserver1.html" class="sidebar-link">虚拟列表(item 固定高度--采用intersectionObserver)(一)</a></li><li><a href="/WJ-blog/front/study/virtualList-intersectionObserver2.html" class="sidebar-link">虚拟列表(item 固定高度--采用intersectionObserver)(二)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>工作遇到的问题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/WJ-blog/front/work/realize-iframe-and-window.postMessage.html" class="sidebar-link">认识iframe和window.postMessage的使用</a></li><li><a href="/WJ-blog/front/work/vue-admin keep-alive-multiple-router-can't-cathe.html" class="sidebar-link">vue 使用keep-alive 三级以上的路由，无法缓存问题</a></li><li><a href="/WJ-blog/front/work/scrollIntoView VS scrollIntoViewIfNeeded.html" class="sidebar-link">scrollIntoView VS scrollIntoViewIfNeeded、爬坑</a></li><li><a href="/WJ-blog/front/work/circle-progress-by-css3.html" class="sidebar-link">静态环形进度条css3实现</a></li><li><a href="/WJ-blog/front/work/circle-progress-by-svg.html" class="sidebar-link">静态环形进度条svg实现</a></li><li><a href="/WJ-blog/front/work/element-ui-use-tricks.html" class="sidebar-link">element-ui 使用时的奇淫巧技</a></li><li><a href="/WJ-blog/front/work/git revert VS git reset.html" class="sidebar-link">git revert VS git reset</a></li><li><a href="/WJ-blog/front/work/git revert recover file.html" class="sidebar-link">git revert恢复撤销的记录</a></li><li><a href="/WJ-blog/front/work/git revert multiple commit.html" class="sidebar-link">git revert多条记录</a></li><li><a href="/WJ-blog/front/work/vue element fonts cannot find after building.html" class="sidebar-link">vue 2.x之打包之后，elements的fonts文件找不到，导致页面图标丢失问题解决</a></li><li><a href="/WJ-blog/front/work/divEditable-1-knowledge.html" aria-current="page" class="active sidebar-link">六期模块--计算公式功能点梳理(一)：知识点梳理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/WJ-blog/front/work/divEditable-2-knowledge.html" class="sidebar-link">六期模块--计算公式功能点梳理(二)：梳理代码 + 解惑篇</a></li></ul></section></li><li><a href="/WJ-blog/algorithm/study-leetcode.html" class="sidebar-link">刷leetcode部分笔记总结</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>生活杂记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/WJ-blog/life/introduction.html" class="sidebar-link">介绍</a></li><li><a href="/WJ-blog/life/lifeDaily/2021-7-7-life.html" class="sidebar-link">2021年7月7日生活笔记</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><font color="blue" size="6">六期模块--计算公式功能点梳理(一)</font></p> <h3 id="一-梳理问题-知识点补充篇"><a href="#一-梳理问题-知识点补充篇" class="header-anchor">#</a> （一） 梳理问题 + 知识点补充篇</h3> <p>1、src/views/standardRuleMaintain下的 divEditable.vue</p> <blockquote><p>可编辑的div, 设置属性是<strong>contenteditable</strong>，就可以让其展示为输入框的效果</p></blockquote> <p>2、计算公式维护这边主要涉及了几个问题（重点问题加粗标出了）</p> <ul><li><strong>如何确定当前的光标位置，可以支持键盘输入@显示，也支持选择后插入</strong>？</li> <li><strong>选择的是变量，如何显示为蓝色，且光标不可定位在其中</strong> ？</li> <li><strong>如何与后台交互这部分数据，并回显数据</strong> ？</li> <li>如何输入@后显示配置的下拉列表，并且支持模糊搜索？</li> <li>如何回车后也支持上述功能实现（之前是不支持的...）?</li></ul> <p>知识点涉及:</p> <blockquote><p>window.getSelection()、range 属性及其方法</p></blockquote> <blockquote><p>正则匹配及替换</p></blockquote> <h3 id="什么是selection-里面包含什么"><a href="#什么是selection-里面包含什么" class="header-anchor">#</a> 什么是selection, 里面包含什么？</h3> <p>selection相关知识点: <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection" target="_blank" rel="noopener noreferrer">MDN selection<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>window.getSelection() 方法表示用户选择的文本范围或光标的当前位置。</p> <p>动图了解：
<img src="/WJ-blog/assets/img/1.5862cfcf.gif" alt="selection做了个啥"></p> <p>重点了解这么几个知识：</p> <p><img src="/WJ-blog/assets/img/1.9ce244c2.png" alt="知识点1"></p> <p>用户可能从左到右（与文档方向相同）选择文本或从右到左（与文档方向相反）选择文本，这样就会导致anchor和focus是不同的。</p> <p>（1） selection属性，以下属性均为只读。</p> <table><thead><tr><th>属性</th> <th style="text-align:right;">释义</th></tr></thead> <tbody><tr><td>anchorNode</td> <td style="text-align:right;">返回该选区起点所在的节点（Node）</td></tr> <tr><td>anchorOffset</td> <td style="text-align:right;">选区起点在 anchorNode 中的位置偏移量</td></tr> <tr><td>focusNode</td> <td style="text-align:right;">返回该选区终点所在的节点</td></tr> <tr><td>focusOffset 返回一个数字，其表示的是选区终点在 focusNode 中的位置偏移量。</td> <td style="text-align:right;"></td></tr> <tr><td>isCollapsed</td> <td style="text-align:right;">返回一个布尔值，用于判断选区的起始点和终点是否在同一个位置</td></tr> <tr><td>rangeCount</td> <td style="text-align:right;">返回该选区所包含的连续范围的数量</td></tr></tbody></table> <p>(2) selection 相关方法</p> <table><thead><tr><th>方法</th> <th style="text-align:right;">释义</th></tr></thead> <tbody><tr><td>getRangeAt</td> <td style="text-align:right;">返回选区包含的指定区域（Range）的引用</td></tr> <tr><td>collapse</td> <td style="text-align:right;">将当前的选区折叠为一个点</td></tr> <tr><td>extend</td> <td style="text-align:right;">将选区的焦点移动到一个特定的位置</td></tr> <tr><td>modify</td> <td style="text-align:right;">修改当前的选区</td></tr> <tr><td>collapseToStart</td> <td style="text-align:right;">将当前的选区折叠到起始点</td></tr> <tr><td>collapseToEnd</td> <td style="text-align:right;">将当前的选区折叠到最末尾的一个点</td></tr> <tr><td>selectAllChildren</td> <td style="text-align:right;">将某一指定节点的子节点框入选区。</td></tr> <tr><td>addRange</td> <td style="text-align:right;">一个区域（Range）对象将被加入选区</td></tr> <tr><td>removeRange</td> <td style="text-align:right;">从选区中移除一个区域</td></tr> <tr><td>removeAllRanges</td> <td style="text-align:right;">将所有的区域都从选区中移除</td></tr> <tr><td>deleteFromDocument</td> <td style="text-align:right;">从页面中删除选区中的内容</td></tr> <tr><td>selectionLanguageChange</td> <td style="text-align:right;">当键盘的朝向发生改变后修改指针的Bidi优先级</td></tr> <tr><td>toString</td> <td style="text-align:right;">返回当前选区的纯文本内容</td></tr> <tr><td>containsNode</td> <td style="text-align:right;">判断某一个 Node 是否为当前选区的一部分</td></tr></tbody></table> <p>getRangeAt方法有一个参数index，<strong>代表该Range对象的序列号；从0开始</strong> ,在所有的浏览器除了火狐浏览器，只使用0</p> <p><code>var range = document.getSelection().getRangeAt(index);</code></p> <p>我们下面写个例子：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span> #111<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 200px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这是一个测试文本<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">getSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>选中上面内容后点我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> sel <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'selection'</span><span class="token punctuation">,</span> sel<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">你选取了第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sel<span class="token punctuation">.</span>rangeCount<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">段内容</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
 <span class="token keyword">const</span> range <span class="token operator">=</span> sel<span class="token punctuation">.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;第&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>sel<span class="token punctuation">.</span>rangeCount<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;段内容为：&quot;</span> <span class="token operator">+</span> range
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str =='</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>最终展示效果：</p> <p><img src="data:image/png;base64,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" alt="效果"></p> <hr> <h3 id="什么是range-里面包含什么"><a href="#什么是range-里面包含什么" class="header-anchor">#</a> 什么是range, 里面包含什么？</h3> <p>表示的是范围，指的是文档中连续的一部分。range的相关理解可以参考这篇文章，讲的很详细： <a href="!https://javascript.info/selection-range#range-selection-methods">range 理解,需翻墙</a></p> <p>range的创建可以用3种方法：</p> <ul><li>可以用 Document 对象的 Document.createRange 方法创建 Range，此时这个range是空的</li> <li>也可以用 Selection 对象的 getRangeAt 方法获取 Range</li> <li>还可以通过 new Range() 来得到 Range。</li></ul> <p>（1） range属性，以下属性均为只读。</p> <table><thead><tr><th>属性</th> <th style="text-align:right;">释义</th></tr></thead> <tbody><tr><td>startContainer</td> <td style="text-align:right;">返回包含 Range 开始的节点</td></tr> <tr><td>endContainer</td> <td style="text-align:right;">返回包含 Range 终点的节点</td></tr> <tr><td>startOffset</td> <td style="text-align:right;">返回一个表示 Range 起点在 startContainer 中的位置的数字，（1）如果startContainer是文本节点、注释节点或CDATA节点，则返回“起点”在startContainer中字符偏移量。（2）如果startContainer是元素节点，则返回“起点”在startContainer.childNodes中的次序</td></tr> <tr><td>endOffset</td> <td style="text-align:right;">返回一个表示 Range 终点在 endContainer 中的位置的数字，<strong>如果Range的父节点是Text类型的Node，则<em>偏移索引将是Range结束字符的索引</em>。对于其他Node类型，endOffset是子节点在父节点末尾的索引</strong></td></tr> <tr><td>collapsed</td> <td style="text-align:right;">表示 Range 的起始位置和终止位置是否相同， true : 相同， false: 不同</td></tr> <tr><td>commonAncestorContainer</td> <td style="text-align:right;">返回完整包含 startContainer 和 endContainer 的、最深一级的节点</td></tr></tbody></table> <p>前面得到例子里，我们打印以下获取到的range对象里：</p> <p><font color="red">注意endOffset的值：因为该节点是textNode，所以这里是第4个字符，索引是4！</font></p> <p><img src="/WJ-blog/assets/img/3.47029b91.png" alt="效果"></p> <p>理解为：</p> <p><img src="data:image/png;base64,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" alt="理解"></p> <p>接下来，我们看一下，startContainer、endContainer分别是文本节点或者 包含节点的节点时，会有啥不同？</p> <p><strong>注：这里获取： <a href="https://jsrun.net/QTQKp/edit" target="_blank" rel="noopener noreferrer">示例代码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,</strong></p> <ul><li>为文本节点，则offset偏移量就是字符的偏移量</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>singleRow<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是单独的一行文本<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">selPart</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>选中部分文字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token comment">// 选中部分文字</span>
<span class="token keyword">function</span> <span class="token function">selPart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> range <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'singleRow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 range<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>firstChild<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 range<span class="token punctuation">.</span><span class="token function">setEnd</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>firstChild<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'此时Range是'</span><span class="token punctuation">,</span>range<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 打印出： 此时Range是 单独的</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>这里，用el.firstChild是为了找出里面具体文字的各个位置</strong></p> <p><img src="data:image/png;base64,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" alt="效果"></p> <ul><li>为node节点，且节点里包含其他node节点，则endOffset是子节点在父节点末尾的索引。</li></ul> <p>下面from, to的文本框输入数字，查看所选中的内容。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ohohoh, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>girls <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span> are <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span> happy !<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>Boys are <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>happy, too !<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
From <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>start<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>4</span><span class="token punctuation">&gt;</span></span> – To <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>end<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>5</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">selTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>选中<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 选中</span>
<span class="token keyword">function</span> <span class="token function">selTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> range <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'testNode'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 range<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span>start<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
 range<span class="token punctuation">.</span><span class="token function">setEnd</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> end<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'此时Range是'</span><span class="token punctuation">,</span>range<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 document<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAllRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 document<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addRange</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="/WJ-blog/assets/img/6.b5b1bf3c.png" alt="效果"></p> <p><img src="data:image/png;base64,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" alt="效果"></p> <p>（2）range 定位的一些方法：</p> <table><thead><tr><th>方法</th> <th style="text-align:right;">释义</th> <th style="text-align:right;">参数</th></tr></thead> <tbody><tr><td>setStart(startNode, startOffset)</td> <td style="text-align:right;">设置 Range 的起点</td> <td style="text-align:right;">startNode:startContainer的引用,偏移则是startOffset</td></tr> <tr><td>setEnd(endNode, endOffset)</td> <td style="text-align:right;">设置 Range 的终点</td> <td style="text-align:right;">endNode: 设定 Range的结束位置; endOffset: 必须为不小于0的整数。表示从endNode的结束位置算起的偏移量。</td></tr> <tr><td>setStartBefore(referenceNode)</td> <td style="text-align:right;">将起点设置在referenceNode前</td> <td style="text-align:right;"></td></tr> <tr><td>setStartAfter(referenceNode)</td> <td style="text-align:right;">将起点设置在referenceNode后</td> <td style="text-align:right;"></td></tr> <tr><td>setEndBefore(referenceNode)</td> <td style="text-align:right;">将结束点设置在referenceNode前</td> <td style="text-align:right;"></td></tr> <tr><td>setEndAfter(referenceNode)</td> <td style="text-align:right;">将结束点设置在referenceNode后</td> <td style="text-align:right;"></td></tr></tbody></table> <p><font color="red">注意:setStartBefore、setStartAfter、setEndBefore、setEndAfter方法设置的“起点”或“结束点”的父节点与referenceNode的父节点是同一个元素</font></p> <p>看一个小例子：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span> #111<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 200px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这是一个测试文本<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>哈哈哈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">delPEle</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>删去p<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token comment">// 删除p元素</span>
<span class="token keyword">function</span> <span class="token function">delPEle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ele1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> ele2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'strong'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> newRan <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// 删除p元素</span>
    newRan<span class="token punctuation">.</span><span class="token function">setStartBefore</span><span class="token punctuation">(</span>ele1<span class="token punctuation">)</span> <span class="token comment">// 起点设置在p元素的开头</span>
    newRan<span class="token punctuation">.</span><span class="token function">setEndBefore</span><span class="token punctuation">(</span>ele2<span class="token punctuation">)</span> <span class="token comment">// 结束点设置在strong元素的前面</span>
    newRan<span class="token punctuation">.</span><span class="token function">deleteContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 选中的是p元素,删p</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><img src="data:image/gif;base64,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" alt="效果"></p> <p>此时点击按钮时，就会出现，p元素被删除。</p> <p>（3） range 修改范围的一些方法</p> <table><thead><tr><th>方法</th> <th style="text-align:right;">释义</th></tr></thead> <tbody><tr><td>deleteContents()</td> <td style="text-align:right;">从dom中删除Range选中的fragment。注意该函数没有返回值（实际上为undefined）。</td></tr> <tr><td>extractContents()</td> <td style="text-align:right;">将选中的Range从dom树中移到一个fragment中，并返回此fragment</td></tr> <tr><td>cloneContents()</td> <td style="text-align:right;">克隆一个range内容给一个fragment，并返回此fragment</td></tr> <tr><td>insertNode(node)</td> <td style="text-align:right;">可以插入一个节点到Range中，注意会插入到Range的“起点”</td></tr> <tr><td>surroundContents(node)</td> <td style="text-align:right;">用节点包围范围内容。为此,必须包含两个开启和关闭标签范围内所有元素</td></tr></tbody></table> <p>可以从上面示例代码的链接，找到对应的展示。</p> <p>这里提到了fragment, fragment是个啥呢，js高级程序设计里写道：</p> <p><img src="/WJ-blog/assets/img/8.a2816691.png" alt="知识点"></p> <p>即为了节约使用dom, 含有dom所有方法，但是dom上不可见，提高执行效率。</p> <h3 id="所以综上所述-selection-和range的区别联系是"><a href="#所以综上所述-selection-和range的区别联系是" class="header-anchor">#</a> 所以综上所述，selection 和range的区别联系是？</h3> <p>查阅stackoverflow得知,</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>The fundamental difference is that a Selection represents the user's selection<span class="token punctuation">,</span> <span class="token keyword">while</span> Range represents a continuous part <span class="token keyword">of</span> a document independently <span class="token keyword">of</span> any visual representation<span class="token punctuation">.</span> <span class="token constant">A</span> Selection <span class="token function">can</span> <span class="token punctuation">(</span>almost<span class="token punctuation">)</span> be expressed <span class="token keyword">in</span> terms <span class="token keyword">of</span> zero<span class="token punctuation">,</span> one or more Ranges but Ranges can also be created and modified completely independently <span class="token keyword">of</span> the selection<span class="token punctuation">.</span>

There is some overlap <span class="token keyword">in</span> functionality<span class="token operator">:</span> <span class="token keyword">for</span> example<span class="token punctuation">,</span> Selection's <span class="token function">deleteFromDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is equivalent to calling <span class="token function">deleteContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> on all <span class="token keyword">of</span> its component Ranges<span class="token punctuation">,</span> and you can <span class="token keyword">get</span> the boundaries <span class="token keyword">of</span> the most recently selected Range <span class="token keyword">in</span> the selection using the anchorNode<span class="token punctuation">,</span> anchorOffset<span class="token punctuation">,</span> focusNode and focusOffset properties<span class="token punctuation">.</span> However<span class="token punctuation">,</span> there are some crucial differences<span class="token operator">:</span>

<span class="token constant">A</span> Selection may contain multiple Ranges<span class="token punctuation">.</span> However<span class="token punctuation">,</span> the only major browser to support <span class="token keyword">this</span> currently is Firefox<span class="token punctuation">.</span>
<span class="token constant">A</span> Selection may be <span class="token string">&quot;backwards&quot;</span><span class="token punctuation">,</span> by which <span class="token constant">I</span> mean that the end boundary <span class="token keyword">of</span> the <span class="token function">selection</span> <span class="token punctuation">(</span>represented by focusNode and focusOffset<span class="token punctuation">)</span> may occur earlier <span class="token keyword">in</span> the document than the start <span class="token function">boundary</span> <span class="token punctuation">(</span>anchorNode and anchorOffset<span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token constant">A</span> Range has no direction<span class="token punctuation">.</span>
<span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> works differently<span class="token punctuation">.</span> In most <span class="token function">browsers</span> <span class="token punctuation">(</span>although notably not <span class="token constant">IE</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> calling <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> on a Selection object returns only the visible text that is selected<span class="token punctuation">,</span> <span class="token keyword">while</span> calling <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> on a Range will <span class="token keyword">return</span> a concatenation <span class="token keyword">of</span> all text nodes within the range<span class="token punctuation">,</span> including those within <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span> elements and elements hidden via <span class="token constant">CSS</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>翻译过来为：</p> <p><img src="/WJ-blog/assets/img/9.c6503a00.png" alt="知识点"></p> <p>那接下来我们细说项目代码实现思路</p> <section style="border-top:2px solid #eaecef;padding-top:1rem;margin-top:2rem;"><div><span data-flag-title="Your Article Title" class="leancloud-visitors"><em class="post-meta-item-text">阅读量： </em> <i class="leancloud-visitors-count"></i></span></div> <h3><a href="javascript:;"></a>
    评 论：
  </h3> <div id="vcomments"></div></section></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">5/9/2022, 11:46:10 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/WJ-blog/front/work/vue element fonts cannot find after building.html" class="prev">
        vue 2.x之打包之后，elements的fonts文件找不到，导致页面图标丢失问题解决
      </a></span> <span class="next"><a href="/WJ-blog/front/work/divEditable-2-knowledge.html">
        六期模块--计算公式功能点梳理(二)：梳理代码 + 解惑篇
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/WJ-blog/assets/js/app.9890bca3.js" defer></script><script src="/WJ-blog/assets/js/2.38039cab.js" defer></script><script src="/WJ-blog/assets/js/4.9a29327f.js" defer></script><script src="/WJ-blog/assets/js/19.c27f844c.js" defer></script>
  </body>
</html>
